struct Params {
	par: any
}

struct Result {
	payload: string,
	success: bool
}

service PremiumService: (Params) -> Result;
service BasicService: (Params) -> Result;

(isPremiumUser: bool, par: Params) =>  {
	let
		Result res = if (isPremiumUser) {
			call PremiumService(par)
		} else {
			call BasicService(par)
		}
	in
		Result {
			success: res.success && res.payload !="failure",
			payload: res.payload
		}
}

fn main(isPremiumUser: bool, par: Params) -> Result {
	svc(isPremiumUser, par)
}